# [ラーニング パス 2 - ラボ 2 - 演習 1 - 管理委任の管理](https://github.com/ctct-edu/ms-102-lab/blob/main/Instructions/Labs/LAB_AK_02_Lab2_Ex1_Manage_Admin_Delegation.md#learning-path-2---lab-2---exercise-1---manage-administration-delegation)

この演習では、Adatum の新しい Microsoft 365 管理者である Holly Dickson としての役割を継続します。Adatum の Microsoft 365 パイロット プロジェクトの一環として、ラボ ホスティング プロバイダーによって作成されたいくつかの Microsoft 365 ユーザー アカウントに Microsoft 365 管理者の役割を割り当てることで、管理の委任を管理します。これらのロールは、Microsoft 365 管理センターと Windows PowerShell の両方を使用して割り当てます。これにより、PowerShell を使用してこれらの管理機能を実行する追加のエクスペリエンスが得られます。Microsoft 365 管理者ロールを既存のユーザー アカウントのいくつかに割り当てたら、ユーザーがそのロールに従って行動するためのアクセス許可を持っていることを確認して、それらの割り当てをテストします。

### [タスク 1 - Microsoft 365 管理センターで委任された管理者を割り当てる](https://github.com/ctct-edu/ms-102-lab/blob/main/Instructions/Labs/LAB_AK_02_Lab2_Ex1_Manage_Admin_Delegation.md#task-1---assign-delegated-administrators-in-the-microsoft-365-admin-center)

Holly Dickson には、Microsoft 365 グローバル管理者の役割が割り当てられています。ホリーとしてのロールを続ける場合、Microsoft 365 管理センターを使用して、複数の Adatum ユーザーに管理者権限を割り当てます。

1. 前のラボ演習では、LON-DC1 上に Adatum の新しいドメインを作成しました。このラボ演習で Microsoft 365 管理タスクを実行するには、**LON-CL1**に切り替える必要があります。ベスト プラクティスとして、一般的な Microsoft 365 管理タスクは、会社のドメイン コントローラーではなくクライアント PC で実行する必要があります。

   **LON-CL1**に切り替えます。

2. **LON-CL1**では、 Edge ブラウザーの**Microsoft 365 管理センター**で、以前のラボ演習で使用した Holly Dickson としてログインしているはずです。左側のナビゲーション ペインで、**[ユーザー]**を選択し、次に**[アクティブなユーザー]**を選択します。

3. **[アクティブ ユーザー]**リストで、**[Diego Siciliani]**を選択します。

   **注:** Diego の名前を選択してください。彼の名前の左側にあるチェックボックスは選択しないでください。**このチェック ボックスは通常、ユーザーのリストの上に表示されるメニュー バーで、 「製品ライセンスの管理」**や「**ロールの管理」**などのユーザー関連アクションの 1 つを実行する場合に、複数のユーザーを選択するために使用されます。ユーザーの名前を選択すると、そのユーザー専用のプロパティ ペインが開きます。

4. 表示される**「Diego Siciliani」**ペインには、デフォルトで**「アカウント」**タブが表示されます。このタブで、**「役割」**セクションまで下にスクロールし、**「役割の管理」**を選択します。

5. **[管理者ロールの管理]**ウィンドウでは、現在、デフォルトで [**ユーザー (管理センター アクセスなし)]オプションが選択されています。**Diego に管理者ロールを割り当てるようになったので、[**管理センター アクセス]**オプションを選択します。これにより、一般的に使用される管理者ロールのリストを選択できるようになります。

6. Diego は請求管理者に昇格しましたが、この役割は一般的に使用される役割のリストに表示されないため、下にスクロールして [**カテゴリ別にすべて表示]**を選択します。

7. カテゴリ別に並べ替えられたロールのリストで、[**その他]**カテゴリまで下にスクロールし、**[課金管理者]**チェック ボックスをオンにして、[**変更の保存]**を選択します。変更が保存されると、ペインの上部に表示される「**管理者ロールが更新されました」**というメッセージに注目してください。

8. **[管理者ロールの管理]**ウィンドウで、画面の右上隅にある[ **X]を選択してウィンドウを閉じます。****これにより、アクティブ ユーザー**リストに戻ります。

9. **「アクティブなユーザー」**リストで、**「Lynne Robbins」**を選択します。

10. 表示される**Lynne Robbins**ペインには、デフォルトで**「アカウント」**タブが表示されます。このタブで、**「役割」**セクションまで下にスクロールし、**「役割の管理」**を選択します。

11. **[管理者ロールの管理]**ウィンドウで、**[管理センター アクセス]**オプションを選択します。これにより、一般的に使用される管理者ロールのリストを選択できるようになります。

12. 一般的に使用される管理者ロールのリストで、**ユーザー管理者**ロールを選択し、**[変更の保存]**を選択します。

13. **Lynne の管理者ロール**が更新されたことを示すメッセージが表示されたら、[管理者ロールの管理] ウィンドウを閉じます。

14. Holly Dickson として LON-CL1 と Microsoft 365 管理センターにログインしたままになります。

### [タスク 2 - Windows PowerShell を使用して委任された管理者を割り当てる](https://github.com/ctct-edu/ms-102-lab/blob/main/Instructions/Labs/LAB_AK_02_Lab2_Ex1_Manage_Admin_Delegation.md#task-2---assign-delegated-administrators-with-windows-powershell)

このタスクは、ユーザーに管理者権限を割り当てるという点で前のタスクと似ています。ただし、この場合は、Microsoft 365 管理センターではなく、Windows PowerShell を使用してこの機能を実行します。一部の管理者は、PowerShell を使用してこのようなメンテナンスを実行することを好むため、これにより、PowerShell でこの管理機能を実行する経験が得られます。

このタスクでは、Holly は Patti Fernandez をサービス サポート管理者の役割に割り当てたいと考えています。Microsoft Graph PowerShell モジュールを使用してユーザーを管理者ロールに追加するには、まずユーザーのオブジェクト ID とロールのオブジェクト ID を取得する必要があります。ロールがまだ有効になっていない場合 (ユーザーに割り当てられていない、または物理的に有効になっていないことを意味します)、PowerShell を使用してユーザーにロールを割り当てる前に、まずロールを有効にする必要があります。このタスクでは、最初にサービス サポート管理者ロールを有効にしてから、それを Patti Fernandez に割り当てます。

PowerShell を使用すると、特定のロールに割り当てられたすべてのユーザーを表示することもできます。これは、Microsoft 365 の展開を監査するときに非常に重要になる可能性があります。このタスクでは、PowerShell を使用して、特定のロールに割り当てられているすべてのユーザーを表示する方法も学習します。

1. LON-CL1 で、前のラボで開いたままにしたタスク バーの Windows PowerShell アイコンを選択します。PowerShell ウィンドウを閉じた場合は、以前と同じ手順を使用して、そのウィンドウの昇格されたインスタンスを開きます。

2. PowerShell セッションは、PowerShell を使用して削除されたグループを回復した前のラボから Microsoft Graph PowerShell に引き続き接続されている必要があります。ただし、以前に PowerShell を閉じて再度開いた場合は、前のラボ演習の手順を使用して Microsoft.Graph.Identity.DirectoryManagement サブモジュールをインポートします。

3. Microsoft Graph PowerShell で Microsoft 365 ユーザー メンテナンス タスクを実行するには、まず Microsoft.Graph.Users サブモジュールをインポートし、読み取り/書き込みアクセス許可を要求する必要があります。このサブモジュールをインポートするには、コマンド プロンプトで次のコマンドを入力し、Enter キーを押します。

   ```
    Import-Module Microsoft.Graph.Users
   ```

   

4. 前のラボ演習では、Microsoft Graph に接続し、削除されたグループを復元するコマンドレットを実行するための "Directory.ReadWrite.All" アクセス許可を要求しました。このタスクでユーザー オブジェクトとロール オブジェクトを更新するには、Holly は各オブジェクトの読み取り/書き込み権限を要求する必要があります。これらのアクセス許可を要求するには、コマンド プロンプトで次のコマンドを入力し、Enter キーを押します。

   ```
    Connect-MgGraph -Scopes 'User.ReadWrite.All', 'RoleManagement.ReadWrite.Directory'
   ```

   

5. **表示される「アカウントを選択」**ウィンドウで、Holly Dickson のアカウントを選択します。

6. **表示される[アクセス許可が要求されました**] ダイアログ ボックスで、 **[組織を代表して同意する]**チェック ボックスをオンにし、**[同意する]**を選択します。

7. **ホリーは、Patti Fernandez を****サービス サポート管理者の**役割に割り当てたいと考えています。Microsoft Graph PowerShell を使用してこのロールを割り当てるには、まずサービス サポート管理者ロールのオブジェクト ID を取得して、それを Patti に割り当てることができるようにする必要があります。ただし、Microsoft Graph PowerShell では、「有効」になっているロールのみを割り当てることができます。有効なロールは、ロール テンプレートから有効になっているか、PowerShell または Microsoft 365 管理センターを通じてユーザーに既に割り当てられているロールです。

   Microsoft 365 で有効な役割をすべて表示するには、コマンド プロンプトで次のコマンドを入力し、Enter キーを押します。

   ```
    Get-MgDirectoryRole    <br/>
   ```

   

   **注:**このコマンドは、Microsoft 365 でこれまでに有効になっているロールを表示します。サービス サポート管理者のロールがこのリストに表示された場合は、手順 13 に直接進んでそのロールを Patti に割り当てることができます。ただし、サービス サポート管理者はこの有効な役割のリストに含まれていないため、手順 13 で Patti を役割に割り当てる前に、手順 8 ～ 12 を実行して、対応する役割テンプレートから役割を有効にする必要があります。

8. Microsoft Graph PowerShell でロールを有効にするには、まずそのテンプレートを見つけて、テンプレートのオブジェクト ID を取得する必要があります。テンプレートからロールを有効にするには、テンプレートのオブジェクト ID を知る必要があります。ロール テンプレートのリストとそのオブジェクト ID および表示名を表示するには、次のコマンドを入力して Enter キーを押します。

   ```
    Get-MgDirectoryRoleTemplate | Format-List Id, DisplayName   <br/>
   ```

   

9. ロール テンプレートのリストで、**サービス サポート管理者**ロールのテンプレート レコードを見つけます (この記事の執筆時点では、これはリストの 7 番目のロールです)。**Service Support Administrator**テンプレートの**ID** (例: fe930be7-5e62-47db-91af-98c3a49a38b1) を強調表示し、 **Ctrl+C**を押してクリップボードにコピーします (コピーすると、強調表示は消えます)。

10. 次に、Service Support Administrator テンプレートの属性を取得する変数を作成します。次のコマンドを入力するときに、**Ctrl+V**を押して、前の手順でクリップボードにコピーした Service Support Administrator テンプレート ID を貼り付けます。

    コマンド プロンプトで次のコマンドを入力し、Enter キーを押します。

    ```
    $ServiceSupportRoleTemplate = @{ RoleTemplateID = "paste in template ID here" }  <br/>
    ```

    

    例: $ServiceSupportRoleTemplate = @{RoleTemplateID = "fe930be7-5e62-47db-91af-98c3a49a38b1" }

11. これで、テンプレートに基づいてサービス サポート管理者ロールを有効にする準備が整いました。次のコマンドを入力して Enter キーを押します。

    ```
    New-MgDirectoryRole -BodyParameter $ServiceSupportRoleTemplate
    ```

    

12. サービス サポート管理者の役割が有効になっていることを確認するには、次のコマンドを入力して Enter キーを押します。このコマンドは、有効な役割のリストを表示します。

    ```
    Get-MgDirectoryRole	<br/>
    ```

    

    **注:**このコマンドは、サービス サポート管理者ロールのオブジェクト ID を表示します。これは、後で手順 15 で Patti をこのロールに割り当てるときにコピーして貼り付けます。

13. Patti Fernandez を新しく有効になったサービス サポート管理者ロールに割り当てるには、まず Patti のユーザー アカウントのオブジェクト ID を取得する必要があります。これを行うには、次のコマンドを入力して Enter キーを押します。

    ```
    Get-MgUser | Format-List ID, DisplayName
    ```

    

14. 最近有効になったサービス サポート管理者ロールのオブジェクト ID と Patti のユーザー アカウントのオブジェクト ID がわかったので、そのロールを Patti に割り当てることができます。このプロセスを完了するには、次の手順を実行します。

    ａ．前のコマンドでは、アクティブなユーザーのリストを表示しました。**Patti のアカウントのID を**強調表示し、クリップボードにコピー ( **Ctrl+C ) します。**ハイライトはクリップボードにコピーされると消えます。

    b. 次のコマンドを実行して、Patti のユーザー アカウントのディレクトリ オブジェクトを含む変数を作成します。このコマンドを入力するときは、 Patti のユーザー アカウント用にコピーした ID を貼り付け ( **Ctrl+V ) ます。**

    ```
    $UserObject = @{ "@odata.id" = "https://graph.microsoft.com/v1.0/directoryObjects/paste in Patti's user account ID here" }	<br/>
    ```

    

    例: $UserObject = @{ "@odata.id" = " https://graph.microsoft.com/v1.0/directoryObjects/22fddbf7-42d2-4698-be65-ebc972a023e3 " }

    c. ステップ 12 で、有効な役割のリストを表示しました。サービス サポート管理者ロールの ID を強調表示し、それをクリップボードにコピーします ( **Ctrl+C )。**

    d. 次のコマンドを実行して、Patti のユーザー アカウント ($UserObject) を含む変数をディレクトリ ロールに割り当てます。このコマンドを入力するときは、サービス サポート管理者ロール用にコピーした ID を貼り付け ( **Ctrl+V ) ます。**

    ```
    New-MgDirectoryRoleMemberByRef -DirectoryRoleId 'paste in the ID of the role here' -BodyParameter $UserObject
    ```

    

15. 次に、Patti がサービス サポート管理者の役割に割り当てられていることを確認します。このロールのオブジェクト ID を以前にクリップボードにコピーし、前のコマンドに貼り付けました。このコマンドにもそれを貼り付ける必要があります。次のコマンドを入力して Enter キーを押します。

    ```
    Get-MgDirectoryRoleMember -DirectoryRoleId 'paste in the ID of the role here' 
    ```

    

16. 前のコマンドでは、選択したロールに割り当てられたユーザーの ID のみが表示されます。ただし、表示されている ID を Patti の ID と照合して、彼女のアカウントにサービス**サポート管理者の**役割が割り当てられていることを確認できます。ご覧のとおり、このロールに割り当てられているユーザーは Patti だけです。

17. このプロセスを繰り返して、全体管理者の役割に割り当てられているすべてのユーザーを表示してみましょう。**手順 15 を繰り返して、全体管理者**ロールに割り当てられている Adatum ユーザーの数を確認します。このコマンドを完了するには、まず全体管理者ロールの ID をクリップボードにコピー ( **Ctrl+C ) する必要があります。**この ID は、手順 12 を実行したときに有効なロールのリストで確認できます。

    **警告:**全体管理者ロール テンプレートの ID ではなく、全体管理者ロールの ID をコピーしてください。

18. グローバル管理者の役割が割り当てられている複数の Adatum ユーザーが存在することを確認します。実際のシナリオでは、Microsoft 365 管理者はこの PowerShell コマンドを使用して、Microsoft 365 展開内に存在する全体管理者の数を監視します。その後、本当にグローバル管理者ロールを持つ必要のないユーザーからそのロールを削除します (ベスト プラクティス ガイドラインは、組織の規模に応じて、Microsoft 365 展開内に 2 ～ 4 人のグローバル管理者を配置することであることに注意してください)。

    このラボの場合、ラボ ホスティング プロバイダーが MOD 管理者以外のユーザーにグローバル管理者ロールを割り当てました (そして、それを Holly Dickson に割り当てました) ので、これらのユーザーはそのままにしておきます。この架空の Adatum 展開では、アカウントからこのロールを削除することに時間を無駄にする必要はありません。さらに、今後のラボ タスクの一部は、これらのユーザーにグローバル管理者の役割が割り当てられることに基づいています。

    **重要:**実際の展開では、Microsoft 365 管理者はグローバル管理者ロールを定期的に監視して、割り当てられたユーザーの数を 2 ～ 4 の間に維持する必要があることに注意してください。

19. 今後のラボ演習のために Windows PowerShell セッションを開いたままにしておきますが、次のタスクに進む前にセッションを最小化します。

### [タスク 3 - 委任された管理の確認](https://github.com/ctct-edu/ms-102-lab/blob/main/Instructions/Labs/LAB_AK_02_Lab2_Ex1_Manage_Admin_Delegation.md#task-3---verify-delegated-administration)

このタスクでは、まず 2 人のユーザー、Joni Sherman と Lynne Robbins の管理プロパティを調査します。次に、クライアント 2 VM (LON-CL2) の Microsoft 365 ホーム ページに各ユーザーとしてログインし、前のタスクで管理委任を管理するときに加えたいくつかの変更を確認します。最後に、Lynne Robbins として、パスワードのリセットとユーザー アカウントのブロックという 2 つの重要なユーザー アカウント メンテナンス タスクを実行します。

1. LON-CL1 では、Holly Dickson として Microsoft 365 管理センターにログインしているはずです。そうでない場合は、今すぐそうしてください。

2. **Microsoft 365 管理センター**で**[アクティブ ユーザー] が**表示されていない場合は、そのページに移動してください。

3. **「アクティブなユーザー」**リストで、**「Joni Sherman」**を選択します。

4. **Joni Sherman の**プロパティ ウィンドウには、デフォルトで**[アカウント]**タブが表示されます。**[役割]**セクションで、Joni に**管理者アクセス権がない**ことが示されているはずです。右上隅の[ **X]**を選択して、 Joni のプロパティ ウィンドウを閉じます。

5. **「アクティブなユーザー」**リストで、**「Lynne Robbins」**を選択します。

6. **Lynne Robbins の**プロパティ ウィンドウには、Lynne に**ユーザー管理者の**役割が割り当てられていることが表示されます。Lynne のプロパティ ウィンドウを閉じます。

7. クライアント 2 VM ( **LON-CL2** ) に切り替えます。

8. **LON-CL2**のログイン画面で、パスワード**Pa55w.rdを使用してローカル****管理者**アカウントとしてログインします。

9. **[ネットワーク]**ウィンドウが表示された場合は、**[はい]**を選択します。

10. タスクバーで、**Microsoft Edge**アイコンを選択します。必要に応じて、Edge ブラウザ ウィンドウを最大化します。

11. **Edge**ブラウザで**[https://portal.office.com](https://portal.office.com/)**に移動します。

12. **まず、 Joni Sherman**として Microsoft 365 にサインインします。**[サインイン]**ウィンドウに、**[「JoniS@xxxxxZZZZZZ.onmicrosoft.com」](mailto:JoniS@xxxxxZZZZZZ.onmicrosoft.com)**と入力します(xxxxxZZZZZZ は、ラボ ホスティング プロバイダーによって提供されるテナント プレフィックスです)。**[パスワードの入力]**ウィンドウで、ラボ ホスティング プロバイダーからテナント管理者アカウント (つまり、MOD 管理者アカウント) 用に提供されたものと同じ**Microsoft 365 テナント パスワードを入力します。**

13. 滞在中に**サインインしていますか?** ウィンドウで、**「今後これを表示しない」**チェックボックスを選択し、**「はい」**を選択します。**[パスワードを保存]**ウィンドウが表示された場合は、**[しない]**を選択します。

14. **ページの中央に[Microsoft 365 へようこそ]**ダイアログ ボックスが表示された場合は、前向き矢印 (>) を 2 回選択してからチェック マークを選択してダイアログ ボックスを閉じます。

15. **[さらにアプリを検索]**ウィンドウが表示された場合は、ウィンドウの右上隅にある[ **X]を選択してウィンドウを閉じます。**

16. Joni の Microsoft 365 ホーム ページである [Microsoft 365 へようこそ] ウィンドウでは、ユーザーがアクセス許可を持つアプリケーションを示すナビゲーション ウィンドウが画面の左側に表示され**ます**。この**[アプリ]**ウィンドウでは、**[管理者]**オプションが表示されていないことに注目してください。これは、Joni には Microsoft 365 管理者の役割が割り当てられていないためです。

17. ここで、Joni として Microsoft 365 からサインアウトします。**Microsoft Edge**の**[Microsoft 365 へようこそ]**ページの右上で、 **Joni Sherman**のユーザー アイコン(右上隅にある Joni の写真が入った円) を選択し、表示される**Joni Shermanウィンドウで、****サインアウト。**

18. **ここで、 Lynne Robbins**として Microsoft 365 にサインインし直します。現在の**Edgeブラウザー タブには、** **「Joni、サインアウトしました。」**というメッセージが表示されます。このウィンドウでは、Joni として再度サインインするか、別のユーザーとしてサインインするかを選択できます。**[別のアカウントに切り替える]**を選択し、表示される**[電子メール アドレス]フィールドに****[LynneR@xxxxxZZZZZZ.onmicrosoft.com](mailto:LynneR@xxxxxZZZZZZ.onmicrosoft.com)** (xxxxxZZZZZZ はラボ ホスティング プロバイダーによって提供されるテナント プレフィックス) と入力し、 [**サインイン]**を選択します。**[パスワードの入力]**ウィンドウで、同じ**Microsoft 365 テナントのパスワードを入力します。**ラボ ホスティング プロバイダーによってテナント管理者アカウント (つまり、MOD 管理者アカウント) に提供されます。

19. **[Microsoft 365 へようこそ]**ダイアログ ボックスが表示された場合は、前向き矢印 (>) を 2 回選択し、チェック マークを選択してウィンドウを閉じます。

20. **[さらにアプリを検索]**ウィンドウが表示された場合は、ウィンドウの右上隅にある[ **X]を選択してウィンドウを閉じます。**

21. **Lynne のMicrosoft 365 ホーム ページである [Microsoft 365 へようこそ]**ウィンドウで、画面左側のナビゲーション ウィンドウに**管理者アイコンがどのように表示されるかに注目してください。**このアイコンは、Lynne が Microsoft 365 管理者ロールに割り当てられているために表示されます。**[管理者]**アイコンを選択して、Microsoft 365 管理センターを開きます。

22. **Microsoft 365 管理センター**のナビゲーション ウィンドウで**[ユーザー]**を選択し、次に**[アクティブなユーザー]**を選択します。

23. **Lynne はユーザー管理者**として、ユーザーのパスワードを変更する権限を持っています。**Lynne さんは最近、 Diego Siciliani 氏**と**Pradeep Gupta 氏**から連絡を受け、それぞれのパスワードが侵害された可能性があると報告しました。Adatum の会社ポリシーに従って、Lynne はパスワードを一時的な値にリセットし、次回のログイン時にパスワードを強制的にリセットする必要があります。

    **[アクティブ ユーザー]**リストで、あるユーザー アカウントから別のユーザー アカウントにマウスを移動すると、各ユーザー名の右側に**キー (パスワードのリセット)アイコンが表示されることに注目してください。****Diego Siciliani の**名前の右側に表示される鍵のアイコンを選択します。

24. Diego の**[パスワードのリセット]**ウィンドウで、 **[パスワードを自動的に作成する]**チェック ボックスにチェック マークが表示されている場合は、このボックスを選択してオフにします。これにより、Lynne は Diego に一時パスワードを手動で割り当てることができるようになります。

25. **「パスワード」**フィールドに**「diego」**と入力します。パスワードの右側に、これが**弱い**パスワードであることを示すメッセージが表示されることに注意してください。フィールドの下に表示される、強力なパスワードの要件を示すメッセージにも注目してください。最後に、ペインの下部にある**[パスワードのリセット]ボタンが有効になっていないことに注目してください。****このボタンは、強力なパスワードを入力した場合にのみ有効になります**。

26. **[最初のサインイン時にこのユーザーにパスワードの変更を要求する**] チェックボックスが選択されていることを確認します(選択されていない場合は、ここで選択してチェックマークを表示します)。**「パスワード」**フィールドに**「Pa55w.rd」**と入力します。**「パスワード」**フィールドは、これが強力なパスワードであることを示していることに注意してください。

    ただし、ここでは [**最初のサインイン時にこのユーザーにパスワードの変更を要求する]**チェックボックスを選択してオフにします。パスワード (Pa55w.rd) に推測しやすい単語、語句、または一連の数字が含まれていることを示すエラー メッセージが表示されることに注意してください。**この場合、 「password」**という単語のバリエーションを入力したため、このエラーが発生します。ユーザーが最初のサインイン時にパスワードの変更を強制した場合、システムはこのパスワードの入力を許可します。ただし、最初のサインイン時にユーザーに別のパスワードの入力を強制しない場合、このパスワードは許可されません。

27. これら 2 回のパスワード試行の失敗を受けて、Lynne は Microsoft 365 にパスワードを自動生成させることにしました。**[パスワードを自動的に作成する]**チェック ボックスをオンにして、チェック マークを表示します。

28. Lynne は Diego が次回ログインするときにパスワードの変更を強制したいため、自動的に生成されるパスワードは一時的なパスワードになります。 したがって、[このユーザーに最初のサインイン時にパスワードの変更を要求する] チェック ボックスにチェック マークが表示されていることを確認し**ます**。ボックスがクリアされている場合は、チェック マークが表示されるように選択します。

29. **[パスワードをリセット]**を選択します。

30. パスワードを保存するように求められた場合は、**「決して**ウィンドウを閉じない」を選択します。

31. Diego には管理者の役割が割り当てられているため、Diego のパスワードをリセットできないことを示すエラー メッセージが表示されます。Diego の場合、このラボ演習の前半で彼に請求管理者の役割を割り当てました。他の管理者のパスワードを変更できるのはグローバル管理者だけであり、Lynne はグローバル管理者ではないため、Holly Dickson にこの変更を依頼する必要があります。**[パスワードのリセット]**ペインで**[閉じる]**を選択します。

32. 調査リクエストウィンドウが表示された場合は、**「キャンセル」**を選択します。

33. **「アクティブなユーザー」**リストで、**Pradeep Gupta**の**キー (パスワードのリセット)**アイコンを選択します。

34. Pradeep の**[パスワードのリセット]**ウィンドウで、 **[パスワードを自動的に作成する]**チェック ボックスにチェック マークが表示されていることを確認します。そうでない場合は、システムが Pradeep のパスワードを自動的に生成するように、ここでこのボックスを選択します。

    Lynne は、Pradeep が次回ログインするときにパスワードの変更を強制したいため、これは単なる一時的なパスワードです。 したがって、[最初のサインイン時に**このユーザーにパスワードの変更を要求する]**チェック ボックスにチェック マークが表示されていることを確認します。ボックスがクリアされている場合は、チェック マークが表示されるように選択します。

35. **「パスワードをリセット」**ボタンを選択します。

36. **[パスワードがリセットされました]**ウィンドウに、Pradeep のパスワードが正常にリセットされたことを示すメッセージが表示されます。**[閉じる]**を選択します。

37. 管理者は最近、Alex Wilber のユーザー名が侵害された可能性があることを発見しました。その結果、Lynne は、管理者が問題の程度を判断できるまで、誰も彼のユーザー名でサインインできないように、Alex のアカウントをブロックするよう求められました。**[アクティブ ユーザー]**リストで、 **Alex Wilber の**名前の左側にあるチェック ボックスをオンにします(Alex の名前自体は選択しないでください)。

    **重要:** Alex のアカウントに関連付けられたコマンドではなく、グローバル コマンドを実行するので、アクティブ ユーザーのリストで Alex のアカウントのみを選択する必要があります。他のユーザー アカウントが選択されている場合は、続行する前にそのユーザー アカウントの選択を解除する必要があります。アクティブなユーザーのリストをスクロールし、他のユーザー アカウントが選択されていないことを確認します。Alex 以外のアカウントが選択されている場合は、そのアカウントのチェック ボックスをオンにしてオフにします。**Alex Wilber のアカウントのみを選択する必要があります。**

38. ページ上部のメニュー バーで**省略記号アイコン (...)**を選択すると、追加のアクションのドロップダウン メニューが表示されます。表示されるメニューで、**[サインイン状態の編集]**を選択します。

39. **表示される[サインインをブロックする]**ウィンドウで、Alex の電子メール アドレスが [**サインインをブロックする]**見出しの下に表示されていることを確認します。**[このユーザーのサインインをブロックする] チェック ボックスを**オンにし、**[変更を保存] を選択します。**

40. [**サインインのブロック]**ウィンドウには、Alex のサインインがブロックされていることを示すメッセージが表示されます (そして、Alex のユーザー名が実際に侵害された場合は、誰も Alex のユーザー名でサインインできなくなります)。さらに、Alex は 60 分以内に Microsoft サービスから自動的にサインアウトされます。ペインの右上隅にある[ **X]**を選択してペインを閉じます。

41. **Lynne さんは、 Nestor Wilke さんの**ユーザー名も侵害された可能性があることを知らされました。手順 33 ～ 36 を繰り返して、Nestor のサインインをブロックします (また、他のユーザーが自分のユーザー名を使用してサインインするのをブロックします)。

    Nestor のサインインをブロックしようとすると、「**変更を保存できませんでした」**というエラー メッセージが表示されるはずです。このエラーが発生した理由は、Nestor が全体管理者であり、Lynne がグローバル管理者ではないためです。グローバル管理者のみが、別のグローバル管理者がサインインできないようにブロックできます。Lynne は、Holly Dickson にこの変更を依頼する必要があります。

    **[サインインをブロックする]**ウィンドウを閉じます。

42. 以前に、Alex Wilber がサインインできないようにブロックしました。彼がブロックされているかどうかを確認するために、Alex としてサインインを試みます。**Lynne Robbins**のユーザー アイコン(右上隅にある Lynne の写真が描かれた円) を選択して Microsoft 365 からログアウトし、表示される**Lynne Robbinsウィンドウで****[サインアウト] を選択します。**

43. ベスト プラクティスとして、サインアウトしたら、**[サインアウト]**タブを除くすべてのブラウザー タブを閉じます。**[サインアウト]**タブで、**[https://portal.office.com](https://portal.office.com/)**に移動します。

44. **[アカウントの選択]**ウィンドウで、**[別のアカウントを使用する]**を選択します。**[サインイン]**ウィンドウに**[「AlexW@xxxxxZZZZZZ.onmicrosoft.com」](mailto:AlexW@xxxxxZZZZZZ.onmicrosoft.com)**と入力します(xxxxxZZZZZZ は、ラボ ホスティング プロバイダーによって提供されるテナント プレフィックスです)。**[パスワードの入力]**ウィンドウで、ラボ ホスティング プロバイダーからテナント管理者アカウント (つまり、MOD 管理者アカウント) 用に提供されたものと 同じ**Microsoft 365 テナント パスワードを入力します。**

    **[アカウントの選択]**ウィンドウが表示され、**アカウントがロックされていること**を示すエラー メッセージが表示されます。**サポート担当者に連絡してロックを解除し、もう一度試してください。**Alex (または Alex のユーザー名とパスワードを取得した人) がログインできないことを確認しました。

    **注:**アカウントのブロックが完全に実装されるまでに数分かかる場合があります。ブロックがシステムに実装されるまで、Alex はログオンできる可能性がありますが、Microsoft 365 サービスはいずれも利用できなくなり、Microsoft 365 ポータルに表示されなくなります。アカウントのブロックが解除されると、サービスは再び利用できるようになります。

    Alex としてサインインできる場合は、サインアウトして数分間待ちます。ちょっとした休憩を取るには良い機会かもしれません。次に、Alex として再度サインインしてみます。この時点までに、Alex のアカウントのサインインがブロックされたことを示すエラー メッセージが表示されるはずです。

45. **LON-CL1**に切り替えます。

46. **LON-CL1**では、 Edge ブラウザーで Holly Dickson として**Microsoft 365**にログインしているはずです。このタスクの前半で、アクティブ**ユーザーのリストが****Microsoft 365 管理センター**に表示されるはずです。

47. さらなる調査の結果、Adatum の CTO は、Alex Wilber のアカウントは実際には侵害されていないと判断しました。そのため、CTO はホリーに Alex のユーザー アカウントのブロックを削除するよう依頼しました。手順 33 ～ 36 を繰り返して、アカウントのブロックを解除します。**手順 35 の[サインインをブロック]**ウィンドウが、代わりに**[サインインのブロックを解除]**ウィンドウ が表示されることに注目してください。

    **[サインインのブロック解除]**ウィンドウでは、現在 [**このユーザーのサインインをブロックする]チェック ボックスがオンになっています。**このチェック ボックスをオンにしてオフにし、**[変更を保存]**を選択します。

    **重要:** Alex が再度サインインできるようになるまでに最大 15 分かかる可能性があることを示す警告メッセージが表示されます。トレーニングには時間の制約があるため、Alex が再度ログインできるかどうかを確認することはありません**。**必要に応じて、休憩中または暇なときに、後で Alex としてログインしてみることもできます。これをテストするために。現時点では、LON-CL1 をそのまま使用し、**[ブロック解除] サインイン**ウィンドウを閉じます。

48. LON-CL1 では、ブラウザとすべてのタブを開いたままにして、次の演習に進みます。
