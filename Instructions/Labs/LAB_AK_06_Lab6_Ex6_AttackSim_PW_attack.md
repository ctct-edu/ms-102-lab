# [ラーニング パス 6 - ラボ 6 - 演習 6 - 攻撃シミュレーション トレーニングを使用してドライブバイ URL 攻撃を実行する](https://github.com/MicrosoftLearning/MS-102T00-Microsoft-365-Administrator-Essentials/blob/master/Instructions/Labs/LAB_AK_06_Lab6_Ex6_AttackSim_PW_attack.md#learning-path-6---lab-6---exercise-6---conduct-a-drive-by-url-attack-using-attack-simulation-training)

Holly Dickson 氏は、Adatum のユーザーの中には、偽の Web サイトやハッキングされた Web サイトへの URL リンクを避けるためのトレーニングが必要になる可能性があることを懸念しています。このタイプの攻撃は、ドライブバイ URL 攻撃として知られています。このタイプの攻撃では、ターゲットは URL リンクを含む電子メールを受信し、ターゲットがリンクを選択すると、バックグラウンド コードを実行する Web サイトに誘導されます。そのバックグラウンド コードの唯一の目的は、ターゲットに関する情報を収集したり、ターゲットに任意のコードを展開したりすることです。デバイス。パイロット プロジェクトの一環として、ホリーは Microsoft 365 攻撃シミュレーション トレーニング機能を使用して、ドライブバイ URL 攻撃に対するユーザーの感受性を判断することにしました。

**注:** この演習の最後に、Holly のアカウントの MFA を無効にします。これにより、このコースの残りのラボで Holly としてサインインするときに、2 番目の認証形式を入力する必要がなくなります。

### タスク 1: ドライブバイ URL 攻撃を設定して開始する

ドライブバイ URL 攻撃では、ターゲットを誘惑しようとする Web サイトは通常、何らかの方法で侵害された既知の Web サイト、または既知の Web サイト自体のクローンです。ハッカーは、Web サイトに精通していることでターゲットへの信頼が高まり、ターゲットが URL リンクを選択しても安全だと感じるまでになることを望んでいます。ホリーは、Tailspin Toys Web サイトのクローンを使用してドライブバイ URL 攻撃を作成したいと考えています。Tailspin Toys は全国的に知られたおもちゃ店で、テレビやソーシャル メディアを通じて常にプロモーションを行っています。ホリーは、Tailspin Toys という名前のブランドに対するこの知識を利用して、攻撃シミュレーション トレーニングの一環として無料のおもちゃの魅力的なプロモーションを提供したいと考えています。これにより、彼女は何人の Adatum 従業員がこの種の攻撃の影響を受けやすいかを確認できるようになります。

前のラボでは、すべての Adatum ユーザーに送信されるシミュレーションを作成しました。シミュレーションには既存のペイロード テンプレートも使用しました。このラボ演習では、シミュレーションを Lynne Robbins にロールアウトするだけで、独自のカスタム ペイロードを作成します。

1. お手元のPCでInPrivate ウィンドウ(Microsoft Edge) もしくは、シークレットウィンドウ (Google Chrome) で、Microsoft 365 管理センター ([https://admin.microsoft.com](https://admin.microsoft.com/)) にアクセスし、Hollyの資格情報でサインインします。

2. Microsoft 365 管理センターの左側のナビゲーション ウィンドウの[管理センター]グループで、  **[セキュリティ]** を選択します。

3. 左側のナビゲーション ウィンドウの [電子メールとコラボレーション]で、  **[攻撃シミュレーション トレーニング]** を選択します。

4. [攻撃シミュレーション] トレーニングページには、デフォルトで[概要]タブが表示されます。**[シミュレーション]** タブを選択し、メニュー バーに表示される **[+ シミュレーションの開始]** を選択します。

5. [テクニックの選択]ページで、 **[URL誘導]** オプションを選択します。このオプションで、 **[URL誘導 の詳細を表示する]** リンクを選択します。これにより、右側にURL誘導ペインが開きます。このタイプの攻撃の説明とシミュレーションの手順を確認してください。完了したら、[URL誘導]ペインを閉じて、**[次へ]** を選択します。

6. [シミュレーションの名前の設定]ページで、[シミュレーション名]フィールドに **「カスタム ペイロード」** と入力し、 **[次へ]** を選択します。

7. **[ペイロードとログインの選択] ページ**で、**[テナントペイロード]** タブを選択して、**[+ペイロードの作成]** を選択します。

8. ペイロード ウィザードの[種類の選択]ページでは、デフォルトで **[メール]** オプションが選択されている必要があります (選択されていない場合は、ここで選択します)。 **「次へ」** を選択します。

9. **[技法の選択]**ページでは、デフォルトで**URL誘導** 攻撃タイプが選択されている必要があります (前の手順 でこのオプションをすでに選択しているため、他のオプションはすべて無効になっています)。 **「次へ」** を選択します。

10. [ペイロードの名前] ページで、次の情報を入力します。

    - ペイロード名:  **無料ギフトオファー**
    - 説明:  **このペイロードは、無料の賞品や信じられないほどのギフトを提供するドライブバイ URL 脅威用です。** 

11. **「次へ」** を選択します。

12. [ペイロードの構成]ページで、次の情報を入力します。

    - 差出人の名前: **Klemen Sic**

    - 差出人のメールアドレス: **klemens@tailspintoys.com**

    - メールの件名: **Tailspin Toys からのおもちゃの無料プレゼント プロモーション**

    - フィッシング リンクにしたい URL を選択します。 **[URL の選択]** ボタンを選択し、架空の URL のリストから **https://www.prizegives.com** をクリックしたあと **[確認]** をクリックします。

    - テーマ: **Personalized Offer**

    - 業界: **Retail**

    - 現在のイベント:**Yes**

    - ペイロードの言語を選択します:**日本語**

    - 電子メール メッセージ: 

         予め、次のテキストを入力したテキストファイルをご自身のPCに作成してください:

         **Tailspin Toys では、25 周年記念の一環として、お好みのおもちゃを 1 つだけ無料でプレゼントします。次のリンクをクリックして、お好みのおもちゃを選択してください:** 

          **[メールのインポート]** をクリックし、上記のテキストファイルをインポートしてください。

    - 前のメッセージをインポートした後、表示されたテキストの最後(～お好みのおもちゃを選択してください:  の後ろ)をクリックしてから、テキスト フォームの上部 (動的 タグの右側) にある **[フィッシング詐欺 リンク]** オプションを選択します。表示される[フィッシング URL に名前を付ける] ダイアログ ボックスで、 [名前]フィールドに **「Free25thAnniversaryGift@tailspintoys.com」** と入力し、  **[確認]** を選択します。

    メッセージは次のように表示されるはずです。

    Tailspin Toys は、25 周年記念の一環として、お選びいただいたおもちゃの 1 回限りの無料ギフトを提供しています。次のリンクをクリックして、お好みのおもちゃを選択してください: **[Free25thAnniversary Gift@tailspintoys.com](mailto:Free25thAnniversaryGift@tailspintoys.com)**

13. **「次へ」** を選択します。

14. [インジケーターの追加]ページで、 **[インジケーターの追加]** を選択します。

15. 右側に表示される[インジケーターの追加]ペインで、次の情報を入力します。

    - 使用するインジケーターを選択します: **うそじゃないかと思うくらい、本当のオファーになる**
    - このインジケーターをペイロードのどこに配置しますか: **メールの本文から**

16.  **「テキストを選択」** ボタンが表示されます。このボタンを選択します。

17. 右側に表示される「必要なテキストの選択」ペインで、コード ブロック全体が強調表示されるように、 **コード ブロックの先頭から末尾までカーソルをドラッグ** します。これにより、 **「Select」** ボタンが有効になります。このボタンを選択します。

18. 「インジケーターの説明」フィールドで、デフォルトの説明を **「無料ギフトまたはその他の 1 回限りのプロモーション特典」** というテキストに置き換えます。

19. **インジケーター プレビュー内を選択** して、インジケーター メッセージのプレビューを表示します。次に、 **[インジケーター プレビュー]フィールドの外側を選択** してプレビューを終了します。

20. [インジケーターの追加]ペインの下部にある **[追加]** ボタンを選択します。

21. [インジケーターの追加] ページに、作成したばかりのインジケーターが表示されます。**「次へ」** を選択します。

22. [ペイロードの確認]ページで、入力した情報を確認します。変更する必要がある場合は、適切な編集オプションを選択して変更します。すべてが正しければ、**「送信」** を選択します。しばらくすると、「新しいペイロードが作成されました」という確認メッセージが表示されます。**[完了]** を選択します。

23. [ペイロードとログイン ページの選択]ウィンドウで、作成したばかりの無料ギフト オファーペイロードがリストに表示されます。このペイロードの情報を確認してください。ペイロードはシミュレーションで使用されていないため、予測侵害率 (%) はまだ決定されていないことに注意してください。

24. [ペイロードとログイン ページの選択]ページで、**無料ギフト オファー**ペイロードの左側にあるチェック ボックスをオンにし、**[次へ]** を選択します。

25. [ターゲット ユーザー]ページで、**[特定のユーザーとグループのみを含める]** オプションを選択し、 **[+ ユーザーの追加]** を選択します。

26. 表示される「ユーザーの追加」ペインの上部にある「ユーザーまたはグループの検索」フィールドに **「Lynne」** と入力し、Enter キーを押します。表示される名前が Lynne で始まるユーザーのリストで、**「Lynne Robbins」** を選択し、 **「1人のユーザーを追加」** を選択します。

27. [ターゲット ユーザー]ページでは、Lynne Robbins がターゲット ユーザーとして表示されます。 **[次へ]** を選択し、 [ユーザーを除外する]ページでもう一度 **[次へ]** を選択します。

28. [トレーニングの割り当て]ページの[設定]セクションで、 **[トレーニングを自動で割り当てる (推奨)]** オプションがデフォルトで選択されている必要があります (選択されていない場合は、ここで選択します)。 **[期限日]** フィールドを選択します。表示されるドロップダウン メニューで、 **[7日 : シミュレーション終了日より]** を選択し、**[次へ]** を選択します。

29. [フィッシングのランディング ページを選択する] ウィンドウには、デフォルトで [グローバル ランディング ページ]タブが表示されます。**Microsoft Landing Page Template 1** の左のチェックボックスを **オン** にして、 **[次へ]** を選択します。

30. [エンド ユーザー通知の選択]ページで、エンド ユーザーへの通知方法を選択します。このラボでは、**[Microsoft の既定の通知 (推奨)]** を選択します。表示される通知のリストで、次の通知を構成します。

    - Microsoft default positive reinforcement notification -配信設定を **シミュレーション終了後に配信する** ように設定します
    - Microsoft default training reminder notification -配信設定を **週毎** に 設定します

31.  **[次へ]** を選択します。

32. [起動の詳細]ページで、  **[完了したらすぐにこのシミュレーションを起動する]** オプションを選択し、  **[次へ]** を選択します。

33. **[シミュレーションの確認]** ページで、入力した情報を確認します。変更する必要がある場合は、適切な編集オプションを選択して変更を加えます。すべてが正しければ、**「送信」** を選択します。シミュレーションの起動がスケジュールされたことを示す確認メッセージが表示されるまでに、数分かかる場合があります。 **[完了]** を選択します。

### タスク 2: ドライブバイ URL 攻撃の結果を確認する

次に、開始したばかりのドライブバイ URL シミュレーション攻撃の結果を確認します。このタスクでは、攻撃シミュレーション トレーニングで構成した電子メールを組織が受信したかどうかを確認します。次に、シミュレーションしたドライブバイ URL 攻撃に関連する結果を確認します。

1. Holly をサインアウトし、ブラウザーを閉じます。

2. Officeポータルにアクセスします。ブラウザーを起動し、アドレス バーに次の URL を入力します: **https://portal.office.com**  

   Lynne Robbins(LynneR@xxxxxZZZZZZ.onmicrosoft.com)の資格情報でサインインしてください。

3. [Microsoft 365 へようこそ]ページの画面左側にあるアプリケーション アイコンの列で、**Outlook**アイコンを選択します。これにより、 Lynne Robbins の Outlook メールボックスが新しいタブで開きます。

4. Lynne の Outlook 受信トレイに、攻撃シミュレーターによって送信された、 klemens@tailspintoys.com　からの電子メールが表示されるはずです。電子メールの件名は、「Tailspin Toys からのおもちゃの無料プレゼント プロモーション」です。電子メールを選択して開き、メッセージ本文の詳細を確認します。

   **注:**　電子メールが届くまでに最大 15 分かかる場合があります。続行する前にメールを待ってください。

5. メールに含まれているリンクを選択します。これがドライブバイ URL 攻撃であることがわかっていても、スピア フィッシング キャンペーンの結果を追跡する攻撃シミュレーター レポートでその効果を確認できるようになります。

   このリンクを選択すると、組織が実施しているフィッシング認識テストの一環としてどのようにリダイレクトされたかを説明する Web ページが表示されます。このサイトのコンテンツを最後まで読んでください。このサイトでは、攻撃シミュレーションを設定するときに前のタスクで選択したランディング ページ テンプレートが使用されています。

6. Lynner をサインアウトし、ブラウザーを閉じます。

7. Microsoft 365 Defender にアクセスします。ブラウザーを起動し、アドレス バーに次の URL を入力します: **https://security.microsoft.com/**  

   holly (holly@xxxxxZZZZZZ.onmicrosoft.com)の資格情報でサインインしてください。

8. ナビゲーション ウィンドウで　**攻撃シミュレーション トレーニング** を選択して表示します。PhishingTest1シミュレーションが表示されます。 **カスタム ペイロード** シミュレーションを選択して、このシミュレーションでキャプチャされた診断結果を表示します。

9. **[カスタム ペイロード]** ページが表示されます。このシミュレートされた攻撃のために収集されたすべての情報を確認します。完了したら、ウィンドウの右上隅にある  **[X]** を選択してウィンドウを閉じます。

### [タスク 3: 全体管理者の多要素認証を無効にする](https://github.com/MicrosoftLearning/MS-102T00-Microsoft-365-Administrator-Essentials/blob/master/Instructions/Labs/LAB_AK_06_Lab6_Ex6_AttackSim_PW_attack.md#task-3-disable-multi-factor-authentication-for-the-global-admin) (最初からHollyのMFAが有効な場合は不要)

Microsoft の攻撃シミュレーション トレーニングを使用してフィッシング攻撃をシミュレートするために、ホリーはユーザー アカウントに対して多要素認証 (MFA) を有効にしました。攻撃シミュレーション トレーニング テストを完了したので、パイロット プロジェクトの残りの部分で MFA に対処する必要がないように、自分のアカウントの MFA を無効にしたいと考えています。

1. Microsoft 365 管理センター にアクセスします。ブラウザーを起動し、アドレス バーに次の URL を入力します: **https://admin.microsoft.com/**  

   holly (holly@xxxxxZZZZZZ.onmicrosoft.com)の資格情報でサインインしてください。

2. Microsoft 365 管理センターの左側のナビゲーション ウィンドウで、 **[ユーザー]**  を選択し、 **[アクティブなユーザー]** を選択します。

3. [アクティブなユーザー]ウィンドウのユーザー リストの上部にあるメニュー バーで、**[多要素認証]** を選択します。

4. 新しい ブラウザー タブに [多要素認証 (MFA) の構成]ウィンドウが表示されます。ページ上部のテキストの段落の下には、「お探しのものではありませんか?」というメッセージが表示される情報ボックスがあります。個々のユーザーごとのレベルで MFA を構成するには、「従来のユーザーごとの MFA」を選択します。このメッセージ内の **「従来のユーザーごとの MFA」** リンクを選択します。

5. 表示される多要素認証ページで、上の方の虫眼鏡アイコンをクリックすると現れる検索欄に、 holly と入力して検索します。 Holly Dickson(holly@WWLxXXXXXX.onmicrosoft.com)のチェック ボックスを **オン** にし、右側に表示される Holly のプロパティ ペインで **[無効にする]** を選択します。

6. 多要素認証を無効にしますか? ダイアログ ボックスで **[はい]** を選択します。

7. [アップデートが成功しました]ダイアログ ボックスが表示されたら、**[閉じる]** を選択します。多要素認証ウィンドウで、Holly の MFA ステータスが無効に変更されたことを確認します。ブラウザの[多要素認証]タブを閉じます。

8. Holly をサインアウトし、ブラウザーを閉じます。
